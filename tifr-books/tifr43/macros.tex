\usepackage{graphicx,xspace,fancybox}
\newcounter{pageoriginal}
\marginparwidth=10pt
\marginparsep=10pt
\marginparpush=5pt
%\renewcommand{\thepageoriginal}{\arabic{pageoriginal}}
\newcommand{\pageoriginale}{\refstepcounter{pageoriginal}\marginpar{\footnotesize\xspace\textbf{\thepageoriginal}}
}  
\let\pageoriginaled\pageoriginale

\newtheorem{lemma}{Lemma}[section]
\newtheorem{proposition}{Proposition}[section]
\newtheorem{theorem}[proposition]{Theorem}
\newtheorem{corollary}[proposition]{Corollary}

\theoremstyle{alphtheorem}
\newtheorem{alphtheorem}{Theorem}
\renewcommand{\thealphtheorem}{\Alph{alphtheorem}}



\newtheoremstyle{remark}{10pt}{10pt}{ }%
{}{\bfseries}{.}{ }{}
\theoremstyle{remark}
\newtheorem{remark}[proposition]{Remark}
\newtheorem{rem}{Remark}
\newtheorem{step}{Step}
\newtheorem{ex}[proposition]{Ex.}
\newtheorem{notation}[proposition]{Notation}
\newtheorem{conclusion}[proposition]{Conclusion}
\newtheorem{chapremarks}{Remarks}[chapter]
\newtheorem{remarks}{Remarks}[section]
\newtheorem{subremarks}{Remarks}[subsection]
\newtheorem{subremark}{Remark}[subsection]
\newtheorem{subsubremark}{Remark}[subsubsection]
\newtheorem{example}[proposition]{Example}
\newtheorem{subexample}{Example}[subsection]
\newtheorem{exam}{Example}
\newtheorem{problem}{Problem}
\newtheorem{examples}{Examples}[section]
\newtheorem{note}{Note}[section]
\newtheorem{claim}{Claim}[section]
\newtheorem{application}{Application}[section]
\newtheorem{proofoflemma}{Proof of Lemma}[section]
\newtheorem{proofofsublemma}{Proof of Lemma}[subsection]
\newtheorem{proofofprop}{Proof of Proposition}[section]
\newtheorem{proofoftheorem}{Proof of theorem}[subsection]
\newtheorem{proofofthm}{Proof of theorem}[section]
\newtheorem{proofcontd}{Proof continued}[subsection]
\newtheorem{pot}{Proof of theorem}[section] 
\newtheorem{proofofthm*}{Proof of Theorem}
\newtheorem{case}{Case}
\newtheorem{definition}[proposition]{Definition}
\newtheorem{defin}{Definition}[section]
\newtheorem{subdefin}{Definition}[subsection]
\newtheorem{subsubdefin}{Definition}[subsubsection]
\newtheorem{defn}{Definition}

\newtheoremstyle{exampleprop}{10pt}{10pt}{ }%
{}{\bfseries}{.~Proposition.}{ }{}
\theoremstyle{exampleprop}
\newtheorem{exprop}[proposition]{Ex.}

\newtheoremstyle{excoro}{10pt}{10pt}{ }%
{}{\bfseries}{.~Corollary.}{ }{}
\theoremstyle{excoro}
\newtheorem{excoro}[proposition]{Ex.}

\newtheoremstyle{dashremark}{10pt}{10pt}{ }%
{}{\bfseries}{$'$.}{ }{}
\theoremstyle{dashremark}
\newtheorem{dashex}[proposition]{Ex.}
\newtheorem{dashdefi}[proposition]{Definition}
\newtheorem{num}[proposition]{}
\newtheoremstyle{nonum}{}{}{\itshape}{}{\bfseries}{{\bf.}}{ }{#1 \mdseries
{\bf #3}}
\theoremstyle{nonum}
\newtheorem{lemma*}{Lemma}	
\newtheorem{theorem*}{Theorem}	
\newtheorem{irreducibilitythm*}{IRREDUCIBILITY THEOREM}
\newtheorem{genirreducibilitythm*}{GENERIC IRREDUCIBILITY THEOREM}
\newtheorem{embedthm*}{EMBEDDING THEOREM}
\newtheorem{prop*}{Proposition}	
\newtheorem{conjecture*}{CONJECTURE}
\newtheorem{coro*}{Corollary}
\newtheoremstyle{mynonum}{}{}{ }{}{\bfseries}{\kern -2pt{\bf.}}{ }{#1 \mdseries
{\bf #3}}
\theoremstyle{mynonum}
\newtheorem{remark*}{Remark}	
\newtheorem{remarks*}{Remarks}	
\newtheorem{exer*}{Exercise}	
\newtheorem{example*}{Example}	
\newtheorem{examples*}{Example}	
\newtheorem{note*}{Note}
\newtheorem{pot*}{Proof of Theorem}
\newtheorem{pot2}{Proof of Theorem \ref{chap2-sec9-thm2}}
\newtheorem{claim*}{Claim}
\newtheorem{defi*}{Definition}
\newtheorem{defins*}{Definitions}
\newtheorem{ex*}{Ex}
\newtheorem{notation*}{Notation}

\def\ophi{\overset{o}{\phi}}

\def\oval#1{\text{\cornersize{2}\ovalbox{$#1$}}}


\newcommand*\mycirc[1]{%
  \tikz[baseline=(C.base)]\node[draw,circle,inner sep=.7pt](C) {#1};\:
}

\def\undersim#1{{\displaystyle{\mathop{\sim}_{#1}}}}

\DeclareMathOperator{\proj}{proj}
\DeclareMathOperator{\Proj}{Proj}
\DeclareMathOperator{\Dim}{Dim}
\DeclareMathOperator{\Range}{Range}
\DeclareMathOperator{\Rank}{Rank}
\DeclareMathOperator{\Res}{Res}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Hhom}{\mathscr{H}om}
\DeclareMathOperator{\coker}{coker}
\DeclareMathOperator{\spec}{spec}
\DeclareMathOperator{\Ob}{Ob}
\DeclareMathOperator{\Sch}{Sch}
\DeclareMathOperator{\Iim}{Im}
\DeclareMathOperator{\Cos}{Cos}
\DeclareMathOperator{\Sin}{Sin}
\DeclareMathOperator{\map}{map}
\DeclareMathOperator{\Min}{Min}
\DeclareMathOperator{\Max}{Max}
\DeclareMathOperator\calEns{\mathcal{E}ns}
\DeclareMathOperator\Pro{Pro}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\Id}{Id}
\DeclareMathOperator{\df}{df}
\DeclareMathOperator{\pr}{pr}
\DeclareMathOperator{\Df}{Df}
\DeclareMathOperator{\Dg}{Dg}
\DeclareMathOperator{\Ad}{Ad}
\DeclareMathOperator{\Sp}{Sp}
\DeclareMathOperator{\sh}{sh}
\DeclareMathOperator{\dt}{dt}
\DeclareMathOperator{\hyp}{hyp}
\DeclareMathOperator{\Hyp}{Hyp}
\DeclareMathOperator{\can}{can}
\DeclareMathOperator{\Ext}{Ext}
\DeclareMathOperator{\red}{red}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\codim}{codim}
\DeclareMathOperator{\grad}{grad}
\DeclareMathOperator{\Spin}{Spin}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\Ker}{Ker}
\DeclareMathOperator{\ring}{ring}
\DeclareMathOperator{\Vol}{Vol}
\DeclareMathOperator{\vol}{vol}
\DeclareMathOperator{\Int}{Int}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Ric}{Ric}
\DeclareMathOperator{\Trace}{Trace}
\DeclareMathOperator{\Char}{char}
\DeclareMathOperator{\mult}{mult}
\DeclareMathOperator{\Supp}{Supp}
\DeclareMathOperator{\Sup}{Sup}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Pic}{Pic}
\DeclareMathOperator{\Cl}{Cl}
\DeclareMathOperator{\ca}{ca}
\DeclareMathOperator{\cu}{cu}
\DeclareMathOperator{\idd}{id.}
\DeclareMathOperator{\transdeg}{trans{.}deg}
\DeclareMathOperator{\diam}{diam}

\newtheorem{Case}{Case}


\def\p{\partial}
\def\uub#1{\underline{\underline{#1}}}
\def\ub#1{\underline{#1}}
\def\oob#1{\overline{\overline{#1}}}
\def\ob#1{\overline{#1}}


\font\bigsymb=cmsy10 at 4pt
\def\bigdot{{\kern1.2pt\raise 1.5pt\hbox{\bigsymb\char15}}}
\def\overdot#1{\overset{\bigdot}{#1}}

\makeatletter
\renewcommand\subsection{\@startsection{subsection}{2}{\z@}%
                                     {-3.25ex\@plus -1ex \@minus -.2ex}%
                                     {-1.5ex \@plus .2ex}%
                                     {\normalfont\bfseries}}%

\renewcommand\subsubsection{\@startsection{subsubsection}{3}{\z@}%
                                     {-3.25ex\@plus -1ex \@minus -.2ex}%
                                     {-1.5ex \@plus .2ex}%
                                     {\normalfont\normalsize\bfseries}}

\renewcommand\thesection{\thechapter.\@arabic\c@section}
%\renewcommand\thesubsection{({\thechapter.\thesection.\@arabic\c@subsection})}
\setcounter{secnumdepth}{3}


\renewcommand{\@seccntformat}[1]{{\csname the#1\endcsname}\hspace{0.3em}}
\makeatother

\def\fibreproduct#1#2#3{#1{\displaystyle\mathop{\times}_{#3}}#2}
\let\fprod\fibreproduct

\def\fibreoproduct#1#2#3{#1{\displaystyle\mathop{\otimes}_{#3}}#2}
\let\foprod\fibreoproduct


\def\cf{{cf.}\kern.3em}
\def\Cf{{Cf.}\kern.3em}
\def\eg{{e.g.}\kern.3em}
\def\ie{{i.e.}\kern.3em}
\def\iec{{i.e.,}\kern.3em}
\def\idc{{id.,}\kern.3em}
\def\resp{{resp.}\kern.3em}


\def\bA{\mathbf{A}}
\def\bB{\mathbf{B}}
\def\bC{\mathbf{C}}
\def\bD{\mathbf{D}}
\def\bE{\mathbf{E}}
\def\bF{\mathbf{F}}
\def\bG{\mathbf{G}}
\def\bH{\mathbf{H}}
\def\bI{\mathbf{I}}
\def\bJ{\mathbf{J}}
\def\bK{\mathbf{K}}
\def\bL{\mathbf{L}}
\def\bM{\mathbf{M}}
\def\bN{\mathbf{N}}
\def\bO{\mathbf{O}}
\def\bP{\mathbf{P}}
\def\bQ{\mathbf{Q}}
\def\bR{\mathbf{R}}
\def\bS{\mathbf{S}}
\def\bT{\mathbf{T}}
\def\bU{\mathbf{U}}
\def\bV{\mathbf{V}}
\def\bW{\mathbf{W}}
\def\bX{\mathbf{X}}
\def\bY{\mathbf{Y}}
\def\bZ{\mathbf{Z}}




\makeatletter

\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else
    \thispagestyle{empty}\hbox{}\newpage\if@twocolumn\hbox{}\newpage\fi\fi\fi}

\renewcommand\tableofcontents{%
    \if@twocolumn
      \@restonecoltrue\onecolumn
    \else
      \@restonecolfalse
    \fi
    \chapter*{\contentsname
        \@mkboth{%
           \contentsname}{\contentsname}}%
    \@starttoc{toc}%
    \if@restonecol\twocolumn\fi
    }
\makeatother

\marginparsep=10pt
\marginparwidth=18pt

\newtheoremstyle{mystyle}{}{}{\itshape}{}{\bfseries}{$'$.}{ }{}
\theoremstyle{mystyle}
\newtheorem{dashthm}{Theorem}




\renewcommand\chaptermark[1]{\markboth{\thechapter. #1}{}}
\renewcommand\sectionmark[1]{\markright{\thesection. #1}}





